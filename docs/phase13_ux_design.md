# 家計簿アプリ UX改善設計書

本ドキュメントでは、現在の家計簿アプリのコードベース（入力画面、カレンダー画面、明細入力など）を分析し、ユーザー体験（UX）を向上させるための改善案とその実装方針（設計）をまとめます。

## 1. 改善の方向性

現在のアプリは機能的に整理されていますが、入力の手間を減らす工夫や、視覚的なフィードバックを強化することで、日常的に使いやすく「触っていて心地よい」プレミアムな体験を提供できます。

主なターゲット領域：

1. **入力フローのシームレス化・高速化**
2. **視覚的フィードバックとマイクロインタラクション（アニメーション化）**
3. **カレンダーとリストの連動性の強化**
4. **ゼロステート（データがない時の状態）の充実**

---

## 2. 具体的なUX改善案と実装設計

### 案A: 入力フローの高速化（Quick Add & 連続入力）

現状は「明細を追加」ボタンを押してドロワーを開く必要がありますが、このステップを短縮します。

- **課題**: 毎回「明細を追加」➔「カテゴリーを探して選ぶ」➔「金額入力」という3ステップが発生している。
- **解決策（Quick Add）**:
  過去の入力履歴や設定に基づいて「よく使うカテゴリー」を数個（例：食費、日用品、交通費など）、入力画面の上部（または「明細を追加」ボタンのすぐ上）に小さなアイコンボタンとして常時表示しておきます。

  **【UXイメージ】**

  ```
  [ 日付: 2026-02-25 ]  [ メモ:                 ]

  [ クイック追加（よく使うカテゴリー） ]
  (🍔食費) (🛒日用品) (🚆交通費) (☕カフェ)

  ------------------------------------------------
                         合計: ¥ 0

  [ + 明細を追加 (その他のカテゴリー) ]
  ```

  ユーザーがこの（🍔食費）アイコンを直接タップすると、カテゴリー選択をスキップして、**いきなり金額入力状態（NumPadのフォーカス）でドロワーが開く**ようになります。これにより、ルーティン化された出費の入力にかかる手間が大幅に削減されます。

- **連続入力のサポート**:
  さらに、金額を入力して「追加」を押した後、ドロワーを自動で閉じずに「続けて入力モード」に移行するオプション（トグルスイッチなど）を追加することで、レシートを見ながら複数項目を打ち込む際のストレスを軽減します。

### 案B: リスト操作の直感性向上（スワイプアクション）

明細の編集・削除の操作を直感的にします。

- **内容**:
  - `LineItemList.svelte` や `ReceiptAccordionList.svelte` のアイテムに対し、スワイプ操作（左スワイプで「削除」ボタン出現、右スワイプで「編集」など）を実装する。
- **設計**:
  - Svelteの `touchstart`, `touchmove`, `touchend` イベント、または軽量なジェスチャーライブラリを用いてスワイプ量を計算。
  - CSSの `transform: translateX` を用いて、リストアイテムの背後にあるアクションボタン（赤色のDeleteなど）を表示させる。

### 案C: 視覚的なフィードバックの強化（アニメーション）

情報の変化をユーザーに分かりやすく伝えます。

- **内容**:
  1. **合計金額のアニメーション**: 明細を追加・削除した際、上部の合計金額が瞬時に切り替わるのではなく、パラパラと数字がカウントアップ/ダウンするアニメーション（Number Ticker）を実装する。
  2. **リストの追加/削除アニメーション**: Svelteの `animate:flip` や `transition:slide/fade` を `LineItemList` に適用し、アイテムが増減した際にスルッと入り込む/消える動きをつける。
- **設計**:
  - 合計金額部分に、Svelteの `tweened` ストア（`svelte/motion`）を使用して、値の変化を補間して表示するコンポーネント `AnimatedNumber.svelte` を作成。
  - `LineItemList.svelte` の `{#each items as item (item.id)}` ループに `animate:flip` を追加。

### 案D: エンプティステートのエモーショナル化と導線追加

データがない時の画面をリッチにし、アクションを促します。

- **内容**:
  - カレンダー画面で「この月のデータはありません」とテキスト表示するだけでなく、薄いイラスト（ウォレットやカレンダーのアイコンなど）を表示し、「入力を始める」という大きなCTA（Call to Action）ボタンを配置する。
- **設計**:
  - `calendar/+page.svelte` の `receipts.length === 0` のブロックを拡張。
  - `goto('/')` （または `/?date=指定日`）に遷移するボタンを追加。

---

## 3. 次のアクション

上記の改善案のうち、取り組みやすいもの、またはユーザーへのインパクトが大きいものから順次実装を進めることを提案します。

**優先度 高（すぐに効果が出る）**:

- 案C: 視覚的なフィードバックの強化（`tweened` の導入、リストのアニメーション）
- 案D: エンプティステートの改善（CTAボタンの追加）

**優先度 中〜高（体験が大きく変わる）**:

- 案A: 入力フローの高速化（連続入力など）

**優先度 中（実装難易度がやや高い）**:

- 案B: スワイプアクション導入

どの案から実装を進めたいか、ご希望やご意見はございますでしょうか？
